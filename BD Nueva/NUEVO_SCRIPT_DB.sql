-- MySQL Script generated by MySQL Workbench
-- mar 31 ene 2017 19:41:41 CST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema PCT2
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `PCT2` ;

-- -----------------------------------------------------
-- Schema PCT2
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `PCT2` DEFAULT CHARACTER SET utf8 ;
USE `PCT2` ;

-- -----------------------------------------------------
-- Table `PCT2`.`precio`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`precio` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`precio` (
  `Precio_id` TINYINT(4) NOT NULL AUTO_INCREMENT,
  `Desc_Precio` VARCHAR(30) NOT NULL,
  `Precio` FLOAT NOT NULL,
  PRIMARY KEY (`Precio_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`cabinas`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`cabinas` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`cabinas` (
  `Cabina_id` SMALLINT(6) NOT NULL AUTO_INCREMENT,
  `Descripcion` VARCHAR(30) NOT NULL,
  `Estado` TINYINT(4) NOT NULL,
  `Precio` INT(11) NOT NULL,
  `Ocupacion_id` INT NULL,
  `Precio_id` INT NULL,
  `precio_Precio_id` TINYINT(4) NOT NULL,
  PRIMARY KEY (`Cabina_id`),
  INDEX `fk_cabinas_precio1_idx` (`precio_Precio_id` ASC),
  CONSTRAINT `fk_cabinas_precio1`
    FOREIGN KEY (`precio_Precio_id`)
    REFERENCES `PCT2`.`precio` (`Precio_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`empresa`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`empresa` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`empresa` (
  `Empresa_id` BIGINT(20) UNSIGNED NOT NULL,
  `Nombre` VARCHAR(30) NOT NULL,
  `CedulaJuridica` VARCHAR(30) NOT NULL,
  `Telefono1` INT(11) NOT NULL,
  `Telefono` INT(11) NOT NULL,
  `Descripcion` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`Empresa_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`clientes_empresarial`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`clientes_empresarial` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`clientes_empresarial` (
  `Cliente_id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Nombre` VARCHAR(30) NOT NULL,
  `Apellido` VARCHAR(30) NOT NULL,
  `Cedula` INT(11) NOT NULL,
  `Telefono` INT(11) NOT NULL,
  `Empresa_id` INT(11) NOT NULL,
  `empresa_Empresa_id` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`Cliente_id`),
  INDEX `fk_clientes_empresarial_empresa_idx` (`empresa_Empresa_id` ASC),
  CONSTRAINT `fk_clientes_empresarial_empresa`
    FOREIGN KEY (`empresa_Empresa_id`)
    REFERENCES `PCT2`.`empresa` (`Empresa_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`cliente` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`cliente` (
  `Cliente_id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Empresa` TINYINT(1) NOT NULL,
  `clientes_empresarial_Cliente_id` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`Cliente_id`),
  INDEX `fk_clientes_clientes_empresarial1_idx` (`clientes_empresarial_Cliente_id` ASC),
  CONSTRAINT `fk_clientes_clientes_empresarial1`
    FOREIGN KEY (`clientes_empresarial_Cliente_id`)
    REFERENCES `PCT2`.`clientes_empresarial` (`Cliente_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`empleado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`empleado` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`empleado` (
  `Empleado_ID` BIGINT(20) UNSIGNED NOT NULL,
  `Nombre` VARCHAR(30) NOT NULL,
  `Apellido` VARCHAR(30) NOT NULL,
  `Cedula` INT(11) NOT NULL,
  `Direccion` VARCHAR(50) NOT NULL,
  `Telefono` INT(11) NOT NULL,
  `FechaContrato` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Empleado_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`facturar_cabina`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`facturar_cabina` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`facturar_cabina` (
  `Factura_id` BIGINT(20) UNSIGNED NOT NULL,
  `Cabina_id` INT(11) NOT NULL,
  `C_dias` TINYINT(4) NULL DEFAULT NULL,
  `Fecha` VARCHAR(30) NOT NULL,
  `Cliente_id` INT(11) NULL DEFAULT NULL,
  `Nombre` VARCHAR(30) NULL DEFAULT NULL,
  `Apellido` VARCHAR(30) NULL DEFAULT NULL,
  `Nombre_Empresa` VARCHAR(30) NULL DEFAULT NULL,
  `Precio` INT(11) NOT NULL,
  `Precio_Total` INT(11) NOT NULL,
  `cliente_Cliente_id` BIGINT(20) UNSIGNED NOT NULL,
  `cabinas_Cabina_id` SMALLINT(6) NOT NULL,
  PRIMARY KEY (`Factura_id`),
  INDEX `fk_facturar_cabina_cliente1_idx` (`cliente_Cliente_id` ASC),
  INDEX `fk_facturar_cabina_cabinas1_idx` (`cabinas_Cabina_id` ASC),
  CONSTRAINT `fk_facturar_cabina_cliente1`
    FOREIGN KEY (`cliente_Cliente_id`)
    REFERENCES `PCT2`.`cliente` (`Cliente_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_facturar_cabina_cabinas1`
    FOREIGN KEY (`cabinas_Cabina_id`)
    REFERENCES `PCT2`.`cabinas` (`Cabina_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`gastos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`gastos` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`gastos` (
  `Gastos_ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Desc_Gasto` VARCHAR(50) NOT NULL,
  `Monto` MEDIUMINT(9) NOT NULL,
  `Fecha` VARCHAR(45) NULL,
  PRIMARY KEY (`Gastos_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`horario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`horario` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`horario` (
  `Horario_ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Entrada` VARCHAR(30) NOT NULL,
  `Salida` VARCHAR(30) NOT NULL,
  `Descansos` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`Horario_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`proveedor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`proveedor` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`proveedor` (
  `Proveedor_ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Nombre_ Proveedor` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`Proveedor_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`inventario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`inventario` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`inventario` (
  `inventario_id` INT(11) NOT NULL AUTO_INCREMENT,
  `Producto_id` INT(11) NULL DEFAULT NULL,
  `Proveedor_id` INT(11) NULL DEFAULT NULL,
  `Nombre_producto` VARCHAR(30) NULL DEFAULT NULL,
  `Cantidad` INT(11) NOT NULL,
  `Fecha_ingreso` INT(11) NULL DEFAULT NULL,
  `Precio_Total` INT(11) NOT NULL,
  `idProveedor` INT NULL,
  `proveedor_Proveedor_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`inventario_id`),
  INDEX `fk_inventario_proveedor1_idx` (`proveedor_Proveedor_ID` ASC),
  CONSTRAINT `fk_inventario_proveedor1`
    FOREIGN KEY (`proveedor_Proveedor_ID`)
    REFERENCES `PCT2`.`proveedor` (`Proveedor_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`ocupacion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`ocupacion` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`ocupacion` (
  `Ocupacion_id` INT(5) NOT NULL AUTO_INCREMENT,
  `Cabina_id` SMALLINT(6) NOT NULL,
  `Fecha` VARCHAR(45) NOT NULL,
  `cabinas_Cabina_id` SMALLINT(6) NOT NULL,
  PRIMARY KEY (`Ocupacion_id`),
  INDEX `fk_ocupacion_cabinas1_idx` (`cabinas_Cabina_id` ASC),
  CONSTRAINT `fk_ocupacion_cabinas1`
    FOREIGN KEY (`cabinas_Cabina_id`)
    REFERENCES `PCT2`.`cabinas` (`Cabina_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`planilla`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`planilla` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`planilla` (
  `Pago_id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Descripcion` VARCHAR(30) NOT NULL,
  `Puesto_id` INT(11) NOT NULL,
  `empleado_id` INT(11) NOT NULL,
  `Nombre` VARCHAR(30) NOT NULL,
  `Apellido` VARCHAR(30) NOT NULL,
  `Cedula` INT(11) NOT NULL,
  `fecha` DATE NOT NULL,
  `Total_Horas_sencillas` FLOAT NOT NULL,
  `Horas_Extras` FLOAT NULL DEFAULT NULL,
  `CCSS` FLOAT NOT NULL,
  `Deducciones` FLOAT NOT NULL,
  `Pago_Total` FLOAT NOT NULL,
  `Empleado_ID` INT NULL,
  `empleado_Empleado_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`Pago_id`),
  INDEX `fk_planilla_empleado1_idx` (`empleado_Empleado_ID` ASC),
  CONSTRAINT `fk_planilla_empleado1`
    FOREIGN KEY (`empleado_Empleado_ID`)
    REFERENCES `PCT2`.`empleado` (`Empleado_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`productos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`productos` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`productos` (
  `Producto_ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Nombre_Producto` VARCHAR(30) NOT NULL,
  `Cantidad` SMALLINT(6) NOT NULL,
  PRIMARY KEY (`Producto_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`puestos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`puestos` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`puestos` (
  `Puesto_id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Descripcion` VARCHAR(30) NOT NULL,
  `empleado_id` INT(11) NOT NULL,
  `horario_id` INT(11) NOT NULL,
  `Salario Base` INT(11) NOT NULL,
  `pago_hora_sencilla` INT(11) NOT NULL,
  `pago_Hora_extra` INT(11) NOT NULL,
  `Horario_ID` INT NULL,
  `horario_Horario_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`Puesto_id`, `horario_Horario_ID`),
  INDEX `fk_puestos_horario1_idx` (`horario_Horario_ID` ASC),
  CONSTRAINT `fk_puestos_horario1`
    FOREIGN KEY (`horario_Horario_ID`)
    REFERENCES `PCT2`.`horario` (`Horario_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`tbl_usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`tbl_usuario` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`tbl_usuario` (
  `id_usuario` INT(11) NOT NULL AUTO_INCREMENT,
  `usuario` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `tipo_usuario` INT NOT NULL,
  PRIMARY KEY (`id_usuario`),
  UNIQUE INDEX `usuario_UNIQUE` (`usuario` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `PCT2`.`Tipo_Usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PCT2`.`Tipo_Usuario` ;

CREATE TABLE IF NOT EXISTS `PCT2`.`Tipo_Usuario` (
  `idTipo_Usuario` INT NOT NULL AUTO_INCREMENT,
  `Descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`idTipo_Usuario`))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
